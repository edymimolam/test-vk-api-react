(this["webpackJsonpvk-friends-search-test"]=this["webpackJsonpvk-friends-search-test"]||[]).push([[0],{14:function(n,e,t){n.exports=t(22)},19:function(n,e,t){},22:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(8),i=t.n(o),u=(t(19),t(4)),c=t(3),l="LOGIN_REQUEST",s="LOGIN_SUCCESS",f="LOGIN_FAILURE",d="LOGOUT",m="FRIENDS_REQUEST",p="FRIENDS_SUCCESS",g="FRIENDS_FAILURE",b="FRIENDS_CLEAR",h={isLoading:!1,isAuth:!1,user:null,friends:null,error:null},v=function(n,e){switch(e.type){case l:case m:return Object(c.a)({},n,{isLoading:!0,error:null});case s:return Object(c.a)({},n,{isLoading:!1,isAuth:!0,user:e.payload});case f:return Object(c.a)({},n,{isLoading:!1,isAuth:!1,error:e.payload});case d:return{isLoading:!1,isAuth:!1,user:null};case p:return Object(c.a)({},n,{isLoading:!1,friends:Object(c.a)({},e.payload)});case g:return Object(c.a)({},n,{isLoading:!1,error:e.payload});case b:return Object(c.a)({},n,{friends:null});default:return n}},E=a.a.createContext({}),x=E.Provider,O=a.a.createContext({}),j=O.Provider,y=t(9),w=t.n(y),A=t(1),L=t(2),_=function(){var n=Object(r.useContext)(E);return{state:n[0],dispatch:n[1]}},C=function(){return Object(r.useContext)(O)};function S(){var n=Object(A.a)(["\n  width: 70%;\n  max-width: 500px;\n  font-size: 1.3rem;\n  border-radius: 25px;\n  border: 1px solid white;\n  padding: 0.5em 1em;\n  box-shadow: 0 0px 11px rgba(57, 63, 72, 0.15);\n  margin: 0 auto 3rem;\n  display: block;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0 0px 7px rgba(57, 63, 72, 0.15);\n  }\n"]);return S=function(){return n},n}var k=L.a.input(S()),I=function(){var n=function(){var n=Object(r.useState)(""),e=Object(u.a)(n,2),t=e[0],a=e[1],o=_().dispatch,i=C();Object(r.useEffect)((function(){return t?(o({type:m}),i.Api.call("friends.search",{q:t,fields:"photo_100, screen_name",v:"5.103"},(function(n){n.response&&o({type:p,payload:n.response}),n.error&&o({type:g,payload:n.error})}))):o({type:b}),function(){}}),[t,o,i.Api]);return{text:t,onTextChange:function(n){return a(n.currentTarget.value)}}}(),e=n.text,t=n.onTextChange;return a.a.createElement(k,{value:e,onChange:function(n){return t(n)}})};function R(){var n=Object(A.a)(["\n  text-align: left;\n"]);return R=function(){return n},n}function F(){var n=Object(A.a)(["\n  margin-right: 1rem;\n"]);return F=function(){return n},n}function N(){var n=Object(A.a)(["\n  margin: 0 auto 2rem;\n  max-width: 700px;\n  display: flex;\n  align-items: center;\n"]);return N=function(){return n},n}var U=L.a.article(N()),z=L.a.img(F()),T=L.a.h3(R()),D=function(n){var e=n.item;return a.a.createElement(U,null,a.a.createElement(z,{src:e.photo_100,alt:"".concat(e.first_name," ").concat(e.last_name)}),a.a.createElement(T,null,"".concat(e.first_name," ").concat(e.last_name)))};function G(){var n=Object(A.a)(["\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 0 2rem;\n"]);return G=function(){return n},n}var W=L.a.main(G()),B=function(){var n=_().state.friends,e=[];return n&&(e=n.items.map((function(n){return a.a.createElement(D,{key:n.id,item:n})}))),a.a.createElement(W,null,e)};function J(){var n=Object(A.a)(["\n  background: #6200ee;\n  font-size: 1.1rem;\n  color: white;\n  @media (max-width: 700px) {\n    padding: 0.75rem 1rem;\n  }\n"]);return J=function(){return n},n}function P(){var n=Object(A.a)(["\n  background: transparent;\n  border: 2px solid #6200ee;\n  font-size: 1.5rem;\n  color: #6200ee;\n"]);return P=function(){return n},n}function Q(){var n=Object(A.a)(["\n  padding: 0.5rem 2rem;\n  border-radius: 10px;\n  text-transform: uppercase;\n"]);return Q=function(){return n},n}function q(){var n=Object(A.a)(["\n  margin: 0 auto 0 1rem;\n  font-size: 1rem;\n  text-transform: capitalize;\n  & span {\n    margin-left: 0.2rem;\n    color: #777;\n  }\n"]);return q=function(){return n},n}function $(){var n=Object(A.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n"]);return $=function(){return n},n}function H(){var n=Object(A.a)(["\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 3px 11px rgba(57, 63, 72, 0.1);\n  margin-bottom: 3rem;\n"]);return H=function(){return n},n}function K(){var n=Object(A.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return K=function(){return n},n}var M=L.a.div(K()),V=L.a.header(H()),X=L.a.img($()),Y=L.a.span(q()),Z=L.a.button(Q()),nn=Object(L.a)(Z)(P()),en=Object(L.a)(Z)(J()),tn=function(){var n=function(){var n=_().dispatch,e=C(),t=Object(r.useCallback)((function(){return e.Api.call("users.get",{fields:"photo_200, counters",v:"5.103"},(function(e){e.error?n({type:f,payload:e.error}):n({type:s,payload:e.response[0]})}))}),[n,e.Api]);Object(r.useEffect)((function(){n({type:l}),e.Auth.getLoginStatus((function(e){return e.session?t():n({type:f})}))}),[e.Auth,t,n]);return{login:function(){n({type:l}),e.Auth.login((function(e){e.session?t():n({type:f,payload:"Authorization Error"})}),2)},logout:function(){return e.Auth.logout((function(){return n({type:d})}))}}}(),e=n.login,t=n.logout,o=_().state,i=o.isAuth,u=o.user,c=o.isLoading,m=o.error;return a.a.createElement(a.a.Fragment,null,m&&a.a.createElement("h3",null,m.error_msg||m),i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null,a.a.createElement(X,{src:u.photo_200}),a.a.createElement(Y,null,"\u0434\u0440\u0443\u0437\u044c\u044f ",a.a.createElement("span",null,u.counters.friends)),a.a.createElement(en,{onClick:function(){return t()}},"logout")),a.a.createElement(I,null),a.a.createElement(B,null)),i||c||a.a.createElement(M,null,a.a.createElement(nn,{onClick:function(){return e()}},"login")),c&&a.a.createElement(M,null,a.a.createElement("h3",null,"Loading...")))};var rn=function(){var n=Object(r.useReducer)(v,h),e=Object(r.useState)(null),t=Object(u.a)(e,2),o=t[0],i=t[1];return a.a.createElement("div",{className:"App"},a.a.createElement(w.a,{apiId:7301447,onApiAvailable:i,onlyWidgets:!1},a.a.createElement(j,{value:o},a.a.createElement(x,{value:n},a.a.createElement(tn,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(rn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.853c2ad6.chunk.js.map